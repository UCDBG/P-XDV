<!-- index.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PEDS: Ask for Price and Explanations for Data Sharing</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/inputText.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <header>
        <h1>PEDS: Ask for Price and Explanations for Data Sharing</h1>
    </header>
    <main>
         <form id="submitForm" action="/" method="GET">
            <section id="importData">
                <h2>Step 1. Upload Data</h2>
                <div>
                    <input id="tableNameInputOwned" placeholder="Enter owned table name">
                    <button id="importDataButtonOwned" type="button">Import Owned Data</button>
                    <input type="file" id="csvFileInputOwned" accept=".csv" style="display: none;">
                </div>

                <div style="padding-top: 5px;">
                    <input id="tableNameInputShared" placeholder="Enter shared table name">
                    <button id="importDataButtonShared" type="button">Import Shared Data</button>
                    <input type="file" id="csvFileInputShared" accept=".csv" style="display: none;">    
                </div>

                <div id="displaySchema" style="display: block; padding-top: 20px;">
                    <section id="tableSchema">
                        <h2>Table Schema</h2>
                        <button id="refreshSchemaButton" type="button" style="margin-bottom: 10px;">Refresh Schema</button>
                        <div class="schema-container" style="overflow-y: scroll; height: 650px;"> 
                            <div class="schema-column" style="width: 50%;">
                                <h3>Owned Schemas</h3>
                                <div id="schemaContainerL"></div>
                            </div>
                    
                            <div class="schema-column" style="width: 50%">
                                <h3>Shared Schemas</h3>
                                <div id="schemaContainerR"></div>
                            </div>
                        </div>
                    </section>
                </div>
            </section>

            <section id="estimatePrice">
                <h2>Step 2. PEDS Data Value Estimation</h2>
                <div>
                    <label for="queryInput">Query Input:</label>
                    <!-- <input type="text" id="queryInput" name="query" placeholder="Type your SQL query here"> -->
                    <textarea id="queryInput" name="query" placeholder="Type your SQL query here"></textarea>
                    <button id="generateQueryButton" type="button" name="action" value="query">Execute SQL Query</button>
                    <button id="generateIGbutton" type="button" name="action" value="IGscript">Valuate Data</button>
                </div>
                <div style="display: none;">
                    <label for="estimateInput">Query Input:</label>
                    <input type="text" id="estimateInput" name="query" placeholder="Example IG Input Query" readonly>
                </div>

                <div id="executeQueryDiv" style="padding-top: 20px; display: none;">
                    <section id = "executeQuerySection">
                        <div id="displayInputQuery"></div>
                        <h2>Query Result</h2>
                        <div id="displayInputTable" style="height: 400px; overflow-y: scroll;"></div>
                    </section>
                </div>
                
                <div id="igDiv" style="height: 1350px; display: none; padding-top: 20px;">
                    <section id = "IGQuerySection">
                        <div id="displayIGQuery"></div>
                        <h2>Query Result</h2>
                        <div id="tableContainer" style="height: 400px; overflow-y: scroll;"></div>

                        <div style="padding-top: 10px;">
                            <label for="startRange">Start Range:</label>
                            <input type="number" id="startRange" placeholder="Enter start index">
                            <label for="endRange">End Range:</label>
                            <input type="number" id="endRange" placeholder="Enter end index">
                            <button id="applyRangeButton" type="button">Apply Range</button>
                        </div>

                        <h2> Bar chart with selection box</h2>
                        <div style="height: 600px; width: 90%; padding-top: 10px;">
                            <canvas id="myChart1"></canvas>
                            <div id="attributeCheckboxes"></div>
                        </div>
                
                    </section>
                </div>
            </section>

            <section id="explSection">
                <h2>Step 3. PEDS Explanations</h2>
                <label for="explInput">Query Input:</label>
                <!-- <input type="text" id="explInput" name="query" placeholder="Example EXPL Input query" readonly> -->
                <textarea type="text" id="explInput" name="query" placeholder="Example EXPL Input query" readonly></textarea>
                <div style="padding-top: 20px;">
                    <label for="kInput">Number of Patterns for Explanations:</label>
                    <input type="number" id="kInput" name="topk" value="10" min="0" placeholder="Enter K">
                </div>
                <button id="generateExpl" type="button" name="action" value="explScript">Generate Explaination</button>
                <div id="explDiv" style="height: 450px; display: none; padding-top: 20px;">
                    <section id = "explQuerySection">
                        <div id="displayexplQuery" style="height: 400px; overflow-y: scroll;"></div>
                    </section>
                </div>
            </section>

        <div>  
        </div>
        
    </main>
    <footer>
        <p>&copy; 2024/2025 PEDS</p>
    </footer>
    <script src="./js/importData.js"></script>
    <script src="./js/executeQuery.js"></script>
    <script src="./js/estimatePrice.js"></script>
    <script src="./js/expl.js"></script>

</body>
</html>
